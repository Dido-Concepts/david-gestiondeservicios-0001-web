---
description: 
globs: 
alwaysApply: false
---
---
description: "Reglas de Git Commits con Conventional Commits para el equipo de desarrollo"
rule_type: "Always"
---

# Reglas de Cursor para Commits de Git

## Formato de Commits CON ICONOS OBLIGATORIOS
Siempre usa el formato de Conventional Commits CON ICONOS siguiendo la configuraci√≥n de @commitlint/config-conventional:
```
<icono> <tipo>[√°mbito opcional]: <descripci√≥n>

[cuerpo opcional]

[pie opcional]
```

## Tipos de Commit (basado en commitlint oficial):

### ‚ú® feat
- **Descripci√≥n**: A new feature (Una nueva funcionalidad)
- **Uso**: Cuando a√±ades nueva funcionalidad al c√≥digo
- **Ejemplo**: `feat(auth): add JWT token validation`

### üêõ fix
- **Descripci√≥n**: A bug fix (Correcci√≥n de un error)
- **Uso**: Cuando corriges un error o bug
- **Ejemplo**: `fix(customer): resolve status update validation error`

### üìö docs
- **Descripci√≥n**: Documentation only changes (Solo cambios en documentaci√≥n)
- **Uso**: Cuando solo modificas documentaci√≥n
- **Ejemplo**: `docs: update API endpoints documentation`

### üíé style
- **Descripci√≥n**: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
- **Uso**: Cambios de formato que no afectan la l√≥gica
- **Ejemplo**: `style: fix code formatting and remove trailing spaces`

### üì¶ refactor
- **Descripci√≥n**: A code change that neither fixes a bug nor adds a feature
- **Uso**: Reestructuraci√≥n de c√≥digo sin cambiar funcionalidad
- **Ejemplo**: `refactor(maintable): simplify repository implementation`

### üöÄ perf
- **Descripci√≥n**: A code change that improves performance
- **Uso**: Mejoras de rendimiento
- **Ejemplo**: `perf(database): optimize query execution time`

### üö® test
- **Descripci√≥n**: Adding missing tests or correcting existing tests
- **Uso**: A√±adir o corregir tests
- **Ejemplo**: `test(services): add unit tests for category service`

### üõ† build
- **Descripci√≥n**: Changes that affect the build system or external dependencies
- **Uso**: Cambios en el sistema de build o dependencias
- **Ejemplo**: `build: update Python dependencies to latest versions`

### ‚öôÔ∏è ci
- **Descripci√≥n**: Changes to CI configuration files and scripts
- **Uso**: Cambios en configuraci√≥n de CI/CD
- **Ejemplo**: `ci: add automated testing workflow`

### ‚ôªÔ∏è chore
- **Descripci√≥n**: Other changes that don't modify src or test files
- **Uso**: Tareas de mantenimiento general
- **Ejemplo**: `chore: update gitignore and remove unused imports`

### üóë revert
- **Descripci√≥n**: Reverts a previous commit
- **Uso**: Revertir un commit anterior
- **Ejemplo**: `revert: undo changes in customer validation logic`

## √Åmbitos (Scopes) para este Proyecto:
Basado en la estructura del proyecto, usa estos √°mbitos cuando sea relevante:

- **auth**: Autenticaci√≥n y autorizaci√≥n
- **customer**: Gesti√≥n de clientes  
- **location**: Gesti√≥n de ubicaciones
- **services**: Gesti√≥n de servicios y categor√≠as
- **maintable**: Tablas maestras y cat√°logos
- **user**: Gesti√≥n de usuarios
- **shifts**: Gesti√≥n de turnos de trabajo
- **days_off**: Gesti√≥n de d√≠as libres
- **user_locations**: Asignaci√≥n usuario-ubicaciones
- **share**: Utilidades y servicios compartidos
- **config**: Configuraci√≥n de la aplicaci√≥n
- **database**: Cambios en base de datos y migraciones
- **api**: Endpoints y rutas de API

## Reglas para el Subject (Descripci√≥n):
1. **M√°ximo 50-72 caracteres**
2. **Min√∫sculas**: No capitalizar la primera letra
3. **Sin punto final**: No terminar con punto
4. **Imperativo**: Usa verbos en presente imperativo ("add", "fix", "update", no "added", "fixed", "updated")
5. **Describe QU√â hace el cambio**, no c√≥mo lo hace

## Estructura del Body (Cuerpo) - Opcional:
- **Cu√°ndo usar**: Para explicar el "por qu√©" del cambio
- **Formato**: M√°ximo 72 caracteres por l√≠nea
- **Contenido**: 
  - Motivo del cambio
  - Comparaci√≥n con comportamiento anterior
  - Efectos secundarios o consideraciones

## Estructura del Footer (Pie) - Opcional:
- **Breaking Changes**: `BREAKING CHANGE: descripci√≥n del cambio disruptivo`
- **Issues**: `Closes #123`, `Fixes #456`, `Refs #789`
- **Co-authored-by**: Para m√∫ltiples autores

## Ejemplos Completos:

### Commit Simple CON ICONO:
```
‚ú® feat(auth): add Google OAuth2 integration
```

### Commit con Body CON ICONO:
```
üêõ fix(customer): resolve customer status update issue

The status validation was incorrectly rejecting valid status 
transitions. Updated the validation logic to allow all 
documented status flows.

Fixes #142
```

### Commit con Breaking Change CON ICONO:
```
‚ú® feat(api): change authentication endpoint structure

BREAKING CHANGE: The /auth/login endpoint now returns tokens 
in a different format. Update client applications to use the 
new 'accessToken' and 'refreshToken' fields instead of 'token'.
```

## Mensajes de Error Comunes y Soluciones:

‚ùå **Error**: "subject may not be empty"
‚úÖ **Soluci√≥n**: Siempre incluye una descripci√≥n despu√©s del tipo

‚ùå **Error**: "type may not be empty" 
‚úÖ **Soluci√≥n**: Siempre especifica un tipo (feat, fix, etc.)

‚ùå **Error**: "subject must not be sentence-case"
‚úÖ **Soluci√≥n**: Usa min√∫sculas: `feat: add feature` no `feat: Add feature`

‚ùå **Error**: "header must not be longer than 100 characters"
‚úÖ **Soluci√≥n**: Mant√©n el header completo bajo 100 caracteres

## Flujo de Trabajo Recomendado:

1. **Antes del commit**: Revisa qu√© archivos cambiaste
2. **Identifica el tipo**: ¬øEs nueva funcionalidad, fix, refactor, etc.?
3. **Determina el √°mbito**: ¬øQu√© m√≥dulo o √°rea afecta?
4. **Escribe la descripci√≥n**: Breve, imperativo, sin punto final
5. **A√±ade body si es necesario**: Para cambios complejos
6. **Referencia issues**: Si aplica

## Comandos √ötiles:

```bash
# Ver cambios antes del commit
git diff --staged

# Commit interactivo (si tienes commitizen)
npx cz

# Validar mensaje de commit
npx commitlint --edit

# Ver historial de commits formateados
git log --oneline --decorate
```

## REGLAS ESPEC√çFICAS PARA GENERACI√ìN DE COMMITS

### Cuando Generes Commit Messages Autom√°ticamente:

1. **ANALIZA los archivos staged** para determinar el tipo y √°mbito correcto
2. **USA SIEMPRE** el formato Conventional Commits CON ICONOS definido arriba
3. **INCLUYE SIEMPRE** el icono correspondiente al tipo de commit
4. **IDENTIFICA el √°mbito** basado en los directorios modificados usando el mapeo siguiente
5. **ESCRIBE la descripci√≥n** en imperativo, min√∫sculas y sin punto final
6. **NO EXCEDAS 72 caracteres** en el header (incluye icono + tipo + √°mbito + descripci√≥n)
7. **INCLUYE body** solo si los cambios requieren explicaci√≥n del "por qu√©"

### ‚ö†Ô∏è REGLA CR√çTICA: USO OBLIGATORIO DE ICONOS
**TODOS los commits DEBEN incluir el icono correspondiente al tipo:**
- ‚ú® feat ‚Üí Para nuevas caracter√≠sticas
- üêõ fix ‚Üí Para correcci√≥n de errores
- ‚ôªÔ∏è refactor ‚Üí Para refactorizaci√≥n
- üìù docs ‚Üí Para documentaci√≥n
- üé® style ‚Üí Para estilos/formato
- ‚ö° perf ‚Üí Para optimizaciones
- üß™ test ‚Üí Para pruebas
- üì¶ build ‚Üí Para sistema de build
- üöÄ ci ‚Üí Para CI/CD
- üîß chore ‚Üí Para mantenimiento


### L√≥gica para Determinar Tipo de Commit:

- **feat**: Nuevos archivos, nuevas funciones, nuevos endpoints
- **fix**: Correcciones de bugs, validaciones, errores
- **refactor**: Cambios de estructura sin nueva funcionalidad
- **chore**: Archivos de configuraci√≥n, dependencias, limpieza
- **docs**: Solo cambios en documentaci√≥n
- **test**: Archivos de pruebas
- **style**: Formateo, espacios, imports sin cambio de l√≥gica
- **perf**: Optimizaciones de rendimiento
- **build**: Cambios en dependencias, build tools
- **ci**: Cambios en CI/CD, workflows

### Formato de Salida Requerido:

```
<tipo>(<√°mbito>): <descripci√≥n breve>

[Body opcional si es necesario explicar el por qu√©]
```

**Ejemplos correctos basados en tu proyecto:**
- `feat(maintable): add query handler for criteria filtering`
- `fix(customer): resolve status validation error`  
- `refactor(share): simplify data shaper service logic`
- `chore(build): update Python dependencies`
- `docs: update API endpoints documentation`



